{
    "$schema": "http://json-schema.org/draft-07/schema",
    "description": "This document is a schema for input data and a design whiteboard.",
    "$comment": "A City is modeled as a graph. This graph is connected, oriented and cyclic.",
    "type": "object",
    "properties": {
        "streets": {
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "isOneWay": {
                        "type": "boolean"
                    },
                    "length": {
                        "type": "number",
                        "description": "The length of a Street sets the maximum capacity of it; therefore, it is useful also for the algorithm."
                    },
                    "semiCarriageways": {
                        "$comment": "The two far ends of a Street are modeled like an array to make them share the same schema.",
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "hasBusStop": {
                                    "type": "boolean"
                                },
                                "lanesAmount": {
                                    "type": "integer"
                                }
                            }
                        },
                        "minItems": 2,
                        "maxItems": 2
                    },
                    "startingIntersectionId": {
                        "type": "integer"
                    },
                    "endingIntersectionId": {
                        "type": "integer"
                    }
                }
            }
        },
        "intersections": {
            "type": "array",
            "items": {
                "type": "object",
                "description": "An intersection must be linked at least to three Streets.",
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "isRoundabout": {
                        "type": "boolean"
                    },
                    "semaphores": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "state": {
                                    "enum": [
                                        "RED",
                                        "YELLOW",
                                        "GREEN",
                                        "BROKEN"
                                    ]
                                }
                            }
                        }
                    },
                    "streetIds": {
                        "type": "array",
                        "items": {
                            "type": "integer"
                        }
                    }
                }
            }
        },
        "vehicles": {
            "type": "object",
            "properties": {
                "cars": {
                    "$comment": "TODO: How to model initial positions of cars, since they are thousands?",
                    "type": "object",
                    "properties": {
                        "amount": {
                            "type": "integer"
                        },
                        "length": {
                            "description": "You can only specify the length of cars.",
                            "$comment": "Width of cars has to do with the lane's width; however, it is not relevant for simulation purposes.",
                            "type": "number"
                        }
                    }
                },
                "buses": {
                    "type": "object",
                    "properties": {
                        "amount": {
                            "type": "integer"
                        },
                        "length": {
                            "description": "You can only specify the length of buses.",
                            "$comment": "Width of buses has to do with the lane's width; however, it is not relevant for simulation purposes.",
                            "type": "number"
                        }
                    }
                }
            }
        }
    }
}